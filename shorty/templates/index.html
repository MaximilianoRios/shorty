{#
    This file is part of Shorty.

    Shorty is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Shorty is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Shorty.  If not, see <http://www.gnu.org/licenses/>.
#}

{% extends 'base.html' %}
{% import 'macros.html' as macros %}

{% block body %}

<div class="row">
    <div class="span12">
        <form method="POST" action="{{ url_for('frontend.index') }}">
            <fieldset>
                {{ macros.render_field(url_form.url,
                        with_label=False,
                        class='input-xxlarge',
                        placeholder='Put your very long URL here') }}
                <br />
                {{ macros.render_field(url_form.submit,
                        with_label=False,
                        class="btn-primary btn-large",
                        value=url_form.submit.label.text) }}
                {{ url_form.hidden_tag() }}
            </fieldset>
        </form>
    </div>
</div>

<div class="row">
    <div class="span12 offset1">
    {% if url_id %}
        {% set short_link = url_id|make_short_link %}
        <h1><a href="{{ short_link }}" class="shorturl">{{ short_link }}</a>
        <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
                width="110"
                height="14"
                id="clippy">
            <param name="movie" value="{{ MEDIA }}/clippy/swf" />
            <param name="allowScriptAccess" value="always" />
            <param name="quality" value="high" />
            <param name="scale" value="noscale" />
            <param name="bgcolor" value="#ffffff" />
            <param NAME="FlashVars" value="text={{ short_link }}" />
            <embed src="{{ url_for('static', filename='media/clippy.swf') }}"
                   width="110"
                   height="14"
                   name="clippy"
                   quality="high"
                   allowScriptAccess="always"
                   type="application/x-shockwave-flash"
                   pluginspage="http://www.macromedia.com/go/getflashplayer"
                   FlashVars="text={{ short_link }}"
                   bgcolor="#ffffff">
            </embed>
        </object>
        </h1>
    {% endif %}
    <br>
    </div>
</div>

{% endblock %}
